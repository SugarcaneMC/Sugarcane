From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: tr7zw <tr7zw@live.de>
Date: Fri, 31 Jul 2020 21:48:14 -0500
Subject: [PATCH] Item stuck sleep config

Original code by Yatopia, licensed under MIT License

diff --git a/src/main/java/net/minecraft/world/entity/item/ItemEntity.java b/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
index 2dac4bc346eb1dde1f8d92c3e5b9648b2c433617..c63e1093ebddff5fb2d5718879847832baea04f9 100644
--- a/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
+++ b/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
@@ -126,7 +126,7 @@ public class ItemEntity extends Entity {
 
             if (this.level.isClientSide) {
                 this.noPhysics = false;
-            } else {
+            } else if (!this.onGround || this.noPhysics || this.tickCount % org.sugarcanemc.sugarcane.server.SugarcaneConfig.itemStuckSleepTicks == 0) { // Sugarcane - Item stuck sleep config
                 this.noPhysics = !this.level.noCollision((Entity) this, this.getBoundingBox().deflate(1.0E-7D), (entity) -> {
                     return true;
                 });
diff --git a/src/main/java/org/sugarcanemc/sugarcane/server/SugarcaneConfig.java b/src/main/java/org/sugarcanemc/sugarcane/server/SugarcaneConfig.java
index 2408f2e9b68c1fc2e6da558d14dde9c5734568b8..949c9438008acb849472d94ddd3deadb9114f9ae 100644
--- a/src/main/java/org/sugarcanemc/sugarcane/server/SugarcaneConfig.java
+++ b/src/main/java/org/sugarcanemc/sugarcane/server/SugarcaneConfig.java
@@ -210,4 +210,9 @@ private static void brandName() {
         checkFlying = getBoolean("settings.checks.flight", checkFlying);
         checkVehicleFlying = getBoolean("settings.checks.vehicle-flight", checkVehicleFlying);
     }
+
+    public static int itemStuckSleepTicks = 1;
+    private static void itemStuckSleepTicks() {
+        itemStuckSleepTicks = getInt("settings.itemStuckSleepTicks", 1);
+    }
 }
\ No newline at end of file
