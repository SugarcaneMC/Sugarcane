From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: The Arcane Brony <myrainbowdash949@gmail.com>
Date: Sun, 26 Jun 2022 18:59:53 +0200
Subject: [PATCH] Build fixes

fixup! Build fixes

fixup! Build fixes

diff --git a/.gitignore b/.gitignore
index bb338269c9e3bef4c274157c490d8b8f8c589937..782421b47ce9e419cb5f4c90937adae53e40c58c 100644
--- a/.gitignore
+++ b/.gitignore
@@ -40,7 +40,9 @@ dependency-reduced-pom.xml
 
 /src/main/resources/achievement
 /src/main/resources/lang
+/src/main/resources/branch-info.properties
 
 # vs code
 /.vscode
 /.factorypath
+out/
diff --git a/build.gradle.kts b/build.gradle.kts
index fd3805da1f276c76a2e814f755f6755245ec2ff4..c46e8b32e419e58d6562adc6711d24f8ce24a18d 100644
--- a/build.gradle.kts
+++ b/build.gradle.kts
@@ -9,7 +9,7 @@ plugins {
 }
 
 dependencies {
-    implementation(project(":purpur-api")) // Purpur
+    implementation(project(":Sugarcane-API")) // Pufferfish // Paper // Purpur // Sugarcane
     // Pufferfish start
     implementation("io.papermc.paper:paper-mojangapi:1.19-R0.1-SNAPSHOT") {
         exclude("io.papermc.paper", "paper-api")
@@ -62,8 +62,9 @@ dependencies {
     testImplementation("io.github.classgraph:classgraph:4.8.47") // Paper - mob goal test
     testImplementation("junit:junit:4.13.2")
     testImplementation("org.hamcrest:hamcrest-library:1.3")
-
     implementation("io.netty:netty-all:4.1.77.Final"); // Paper - Bump netty
+    implementation("org.reflections:reflections:0.10.2") // Sugarcane
+    implementation("org.apache.commons:commons-rng-core:1.3") // Sugarcane - Utilities
 }
 
 val craftbukkitPackageVersion = "1_19_R1" // Paper
@@ -87,7 +88,7 @@ tasks.jar {
         attributes(
             "Main-Class" to "org.bukkit.craftbukkit.Main",
             "Implementation-Title" to "CraftBukkit",
-            "Implementation-Version" to "git-Purpur-$implementationVersion",// Purpur
+            "Implementation-Version" to "git-Sugarcane-$gitBranch-$implementationVersion", // Pufferfish // Purpur // Sugarcane
             "Implementation-Vendor" to date, // Paper
             "Specification-Title" to "Bukkit",
             "Specification-Version" to project.version,
@@ -99,6 +100,9 @@ tasks.jar {
         for (tld in setOf("net", "com", "org")) {
             attributes("$tld/bukkit", "Sealed" to true)
         }
+        File("Sugarcane-Server/src/main/resources/branch-info.properties").bufferedWriter().use { out ->
+            out.write("branch=$gitBranch")
+        }
     }
 }
 
@@ -113,6 +117,7 @@ relocation {
     relocate("org.bukkit.craftbukkit" to "org.bukkit.craftbukkit.v$craftbukkitPackageVersion") {
         exclude("org.bukkit.craftbukkit.Main*")
     }
+    relocate("de.tr7zw.changeme.nbtapi" to "de.tr7zw.nbtapi") // Sugarcane - Add NBT API as a first-class lib
 }
 
 tasks.shadowJar {
